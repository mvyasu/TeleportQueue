"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[331],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),i=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=i(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,p=u(e,["components","mdxType","originalType","parentName"]),c=i(n),h=l,y=c["".concat(s,".").concat(h)]||c[h]||d[h]||r;return n?a.createElement(y,o(o({ref:t},p),{},{components:n})):a.createElement(y,o({ref:t},p))}));function h(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,o=new Array(r);o[0]=c;var u={};for(var s in t)hasOwnProperty.call(t,s)&&(u[s]=t[s]);u.originalType=e,u.mdxType="string"==typeof e?e:l,o[1]=u;for(var i=2;i<r;i++)o[i]=n[i];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},76647:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>u,toc:()=>s});var a=n(87462),l=(n(67294),n(3905));const r={},o=void 0,u={type:"mdx",permalink:"/TeleportQueue/",source:"@site/pages/index.md",description:"GitHub Issues",frontMatter:{}},s=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Advanced Example",id:"advanced-example",level:2}],i={toc:s};function p(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/mvyasu/TeleportQueue/issues"},(0,l.kt)("img",{parentName:"a",src:"https://img.shields.io/github/issues/mvyasu/TeleportQueue.svg",alt:"GitHub Issues"})),"\n",(0,l.kt)("a",{parentName:"p",href:"https://github.com/mvyasu/TeleportQueue/stargazers"},(0,l.kt)("img",{parentName:"a",src:"https://img.shields.io/github/stars/mvyasu/TeleportQueue.svg",alt:"GitHub Stars"})),"\n",(0,l.kt)("a",{parentName:"p",href:"https://opensource.org/licenses/MIT"},(0,l.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/License-MIT-blue.svg",alt:"License: MIT"}))),(0,l.kt)("h1",{id:"teleportqueue"},"TeleportQueue"),(0,l.kt)("p",null,"TeleportQueue is a simple module that allows Roblox developers to quickly setup a teleport queue alongside options with ease. In other words, it's a headstart for creating a system that involves teleporting a group of players to a specific place. The current release can be found and downloaded ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/mvyasu/TeleportQueue/releases"},"here"),"."),(0,l.kt)("p",null,"You can read the ",(0,l.kt)("a",{parentName:"p",href:"https://mvyasu.github.io/TeleportQueue/api"},"documentation")," for more info."),(0,l.kt)("h2",{id:"basic-usage"},"Basic Usage"),(0,l.kt)("p",null,"To begin using this resource, you'll want to first construct a new TeleportQueue. All you need to do is:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'local TeleportQueue = require(game:GetService("ReplicatedStorage").Packages.TeleportQueue)\n\nlocal newTeleportQueue = TeleportQueue.new({\n    PlaceId = 606849621, -- Jailbreak\'s PlaceId\n    Id = game:GetService("HttpService"):GenerateGUID(), -- How we identify the queue\n})\n')),(0,l.kt)("p",null,"There are more options that you can pass besides ",(0,l.kt)("inlineCode",{parentName:"p"},"PlaceId")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"Id"),", but these are the most important options in my opinion besides ",(0,l.kt)("inlineCode",{parentName:"p"},"TeleportOptions"),". Now that you created a new queue, you can add players to it like so:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'local addResult = newTeleportQueue:Add(player)\nif addResult == TeleportQueue.AddResult.Success then\n    print("Added the player to the queue!")\nend\n')),(0,l.kt)("p",null,"The TeleportQueue will automatically remove the added player from the queue if they leave the game. However, if you ever need to remove a player from the queue, all you need to do is:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},"newTeleportQueue:Remove(player)\n")),(0,l.kt)("p",null,"Once you're done with adding and removing players from the queue and are ready to teleport them, all you need to do is:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'local flushResult, teleportResult = newTeleportQueue:Flush()\nif flushResult == TeleportQueue.FlushResult.Success then\n    print("Here\'s the TeleportAsyncResult:", teleportResult)\nend\n')),(0,l.kt)("p",null,"If the flush was successful, the players should teleport out of the server, causing them to be removed from the queue, but potentially not immediately. This means if something goes wrong and they didn't teleport for some reason, they will still be left inside the queue. If you don't want to keep them inside the queue, you can call this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},"newTeleportQueue:RemoveAll()\n")),(0,l.kt)("p",null,"Once you're done with the TeleportQueue, you'll need to destroy it. If you don't, you could potentially run into a memory leak since you aren't disconnecting the connections that it uses to automatically remove players from the queue. To destroy a queue when you're done, all you need to do is:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},"newTeleportQueue:Destroy()\n")),(0,l.kt)("p",null,"After this is called, calling certain methods for the TeleportQueue will no longer do anything."),(0,l.kt)("h2",{id:"advanced-example"},"Advanced Example"),(0,l.kt)("p",null,"With everything explained above, below is an example of how you could use the module in a more advanced way. What makes the TeleportQueue below special is that it's adding a tag and giving an attribute to players in the queue. With those, it can be determined who is in the same queue as other people."),(0,l.kt)("p",null,"In other words, you can use that info for components on the client and show who is in what queue."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'local TeleportQueue = require(game:GetService("ReplicatedStorage").Packages.TeleportQueue)\n\nlocal function createTagTeleportQueue()\n    local TELEPORT_QUEUE_TAG = "TeleportQueuePlayer"\n    local TELEPORT_QUEUE_ATTRIBUTE = "TeleportQueue"\n    \n    local CollectionService = game:GetService("CollectionService")\n    return TeleportQueue.new({\n        Id = game:GetService("HttpService"):GenerateGUID(),\n        PlaceId = 0,\n        \n        OnOptionUpdated = {\n            Id = function(self, newQueueId)\n                for _,player in self:GetPlayers() do\n                    player:SetAttribute(TELEPORT_QUEUE_ATTRIBUTE, newQueueId)\n                end\n            end,\n        },\n        \n        OnPlayerAdded = function(self, player)\n            player:SetAttribute(TELEPORT_QUEUE_ATTRIBUTE, self:GetOption("Id"))\n            CollectionService:AddTag(player, TELEPORT_QUEUE_TAG)\n        end,\n        \n        OnPlayerRemoved = function(self, player)\n            CollectionService:RemoveTag(player, TELEPORT_QUEUE_TAG)\n            player:SetAttribute(TELEPORT_QUEUE_ATTRIBUTE, nil)\n        end,\n        \n        AllowedWithinQueue = function(self, player)\n            local currentQueueId = player:GetAttribute(TELEPORT_QUEUE_ATTRIBUTE) \n            \n            local hasTag = CollectionService:HasTag(player, TELEPORT_QUEUE_TAG)\n            local hasQueueId = currentQueueId~=nil and currentQueueId~=self:GetOption("Id")\n            \n            local isWithinDifferentQueue = hasTag and hasQueueId\n            return not isWithinDifferentQueue, "Player is already within a different queue"\n        end,\n    })\nend\n\ndo\n    local jailbreakQueue = createTagTeleportQueue()\n    jailbreakQueue:SetOptions({\n        PlaceId = 606849621,\n    })\n\n    local function onPlayerAdded(player)\n        jailbreakQueue:Add(player)\n    end\n\n    local listenToPlayerAdded = game.Players.PlayerAdded:Connect(onPlayerAdded)\n    for _,player in game:GetService("Players"):GetPlayers() do\n        task.spawn(onPlayerAdded, player)\n    end\n    \n    task.delay(8, function()\n        local flushResult, teleportResult = jailbreakQueue:Flush()\n        if flushResult==TeleportQueue.FlushResult.Success then\n            print("Successfully flushed the queue!")\n            print("Here\'s the TeleportAsyncResult:", teleportResult)\n            if listenToPlayerAdded then\n                listenToPlayerAdded:Disconnect()\n                listenToPlayerAdded = nil\n            end\n            jailbreakQueue:Destroy()\n        else\n            warn("Failed to flush the queue!")\n            print("FlushResult:", flushResult)\n            if flushResult==TeleportQueue.FlushResult.Failure then\n                print("Error:", teleportResult)\n            end\n        end\n    end)\nend\n')))}p.isMDXComponent=!0}}]);